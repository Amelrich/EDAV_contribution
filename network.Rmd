# Interactive Networks {#network}

![](images/banners/banner_network.png)

<!--## ggnetwork (static)-->

## visNetwork (interactive)

`visNetwork` est une puissante implémentation via R de la librairie JavaScript `vis.js`; il utilise `tidyverse`: [Documentation VisNetwork](https://datastorm-open.github.io/visNetwork/){target="_blank"}.

--> Le Vignette a des exemples clairement élaborés disponibles sur : https://cran.r-project.org/web/packages/visNetwork/vignettes/Introduction-to-visNetwork.html


La documentation `visNetwork` ne fournit pas le même niveau d’explication que l’original, il est donc intéressant de consulter le `vis.js` documentation ainsi que:
http://visjs.org/index.html  En particulier, le [interactive examples](http://visjs.org/network_examples.html){target="_blank"} sont particulièrement utiles pour essayer différentes options. Par exemple, vous pouvez tester des options de physique avec cette [network configurator](http://visjs.org/examples/network/physics/physicsConfiguration.html){target="_blank"}. 


### Minimum working example

Créer un [node data frame](https://datastorm-open.github.io/visNetwork/nodes.html){target="_blank"} avec un minimum de colonne (doit être appelé `id`) avec node des noms:

```{r}
# nodes
boroughs <- data.frame(id = c("The Bronx", "Manhattan", "Queens", "Brooklyn", "Staten Island"))
```


Créer un séparé data frame de [edges](https://datastorm-open.github.io/visNetwork/edges.html){target="_blank"} avec `from` et `to` columns. 


```{r}
# edges
connections <- data.frame(from = c("The Bronx", "The Bronx", "Queens", "Queens", "Manhattan", "Brooklyn"), to = c("Manhattan", "Queens", "Brooklyn", "Manhattan", "Brooklyn", "Staten Island"))
```


Dessine le network avec `visNetwork(nodes, edges)`

```{r}
library(visNetwork)
visNetwork(boroughs, connections)
```


Ajouter labels en ajoutant un label column à `nodes`:

```{r message=FALSE}
library(dplyr)
boroughs <- boroughs %>% mutate(label = id)
visNetwork(boroughs, connections)
```



### Performance

`visNetwork` peut être très lent. 

`%>% visPhysics(stabilization = FALSE)` starts rendering avant que la stabilisation soit complète, ce qui accélère réellement les choses mais vous permet de voir ce qui se passe, ce qui fait une grande différence dans l'expérience utilisateur. (C’est aussi amusant de regarder la network stabilize).  D'autres astuces de performance sont décrites [here](https://datastorm-open.github.io/visNetwork/performance.html){target="_blank"}.
  
### Helpful configuration tools  
  
`%>% visConfigure(enabled = TRUE)` est un outil utile pour configurer les options de manière interactive. Une fois terminé, cliquez sur "generate options" pour que le code reproduise les paramètres. More [here](https://datastorm-open.github.io/visNetwork/configure.html){target="_blank"} (Notez que changer les options puis les visualiser nécessite beaucoup de défilement vertical dans le navigateur. Je ne suis pas sûr si quelque chose peut être fait à ce sujet. Si vous avez une solution, faites le moi savoir!)
  
### Coloring nodes

Ajouter une colonne de noms de couleurs réelles à la nodes data frame:

```{r}
boroughs <- boroughs %>% mutate(is.island = c(FALSE, TRUE, FALSE, FALSE, TRUE)) %>% mutate(color = ifelse(is.island, "blue", "yellow"))
visNetwork(boroughs, connections)
```

### Directed nodes (arrows)

```{r}
visNetwork(boroughs, connections) %>% 
  visEdges(arrows = "to;from", color = "green")
  
```

### Turn off the physics simulation

C'est beaucoup plus rapide sans la simulation. Le nodes sont placés au hasard et peuvent être déplacés sans affecter le reste de la network, au moins dans le cas de petites networks.

```{r}
visNetwork(boroughs, connections) %>% 
  visEdges(physics = FALSE)
```

### Grey out nodes far from selected (defined by "degree")

(Cliquez node pour voir l'effet.)

```{r}
# defaults to 1 degree
visNetwork(boroughs, connections) %>% 
  visOptions(highlightNearest = TRUE)

# set degree to 2
visNetwork(boroughs, connections) %>% 
  visOptions(highlightNearest = list(enabled = TRUE, 
                                     degree = 2))
```

